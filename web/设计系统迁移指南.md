# New API AI-First Design System Migration Guide

## ğŸ¯ Overview

This guide provides step-by-step instructions for migrating your New API frontend to use the new AI-First Design System. The migration ensures consistent theming, improved accessibility, and enhanced AI-specific visual experiences.

## ğŸ“‹ Prerequisites

- âœ… Semi Design UI library is already installed and configured
- âœ… Basic understanding of CSS custom properties (CSS variables)
- âœ… Familiarity with the project structure

## ğŸš€ Quick Start (5 minutes)

### Step 1: Import Theme Files

Add these imports to your `src/index.jsx`:

```javascript
import '@douyinfe/semi-ui/dist/css/semi.css';
import './styles/theme.css';           // AI-First Design System Theme
import './styles/components.css';       // Component-specific overrides
import './styles/ai-effects.css';       // AI animations and effects
import './styles/markdown.css';        // Markdown rendering enhancements
```

### Step 2: Verify Installation

Start your development server and check:
- âœ… Primary buttons use Neural Blue (#2563EB)
- âœ… AI components show gradient effects
- âœ… Dark mode switches correctly
- âœ… Animations work smoothly

## ğŸ¨ Design System Features

### Color Palette

| Purpose | Variable | Light Mode | Dark Mode |
|---------|----------|------------|-----------|
| Primary | `--semi-color-primary` | #2563EB | #3B82F6 |
| AI Gradient | `--semi-color-ai-general` | Blueâ†’Purple | Blueâ†’Purple |
| Success | `--semi-color-success` | #10B981 | #10B981 |
| Warning | `--semi-color-warning` | #F59E0B | #F59E0B |
| Danger | `--semi-color-danger` | #EF4444 | #EF4444 |

### Typography

```css
/* Code Font */
font-family: var(--semi-font-family-code); /* JetBrains Mono */

/* System Font */
font-family: var(--semi-font-family-system); /* Inter, system fonts */
```

### Border Radius

```css
--semi-border-radius-small: 4px;
--semi-border-radius-medium: 6px;
--semi-border-radius-large: 8px;
```

### Shadows

```css
--semi-shadow-elevated: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
--semi-shadow-medium: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
--semi-shadow-large: 0 20px 25px -5px rgba(0, 0, 0, 0.1);
```

## ğŸ”§ Component Usage

### AI Chat Bubbles

```jsx
// User message
<div className="ai-chat-bubble user">
  <p>What can you help me with?</p>
</div>

// AI message
<div className="ai-chat-bubble assistant">
  <p>I can help you with coding, analysis, and more!</p>
</div>
```

### AI Buttons

```jsx
// Standard AI button
<button className="ai-button">
  Generate Code
</button>

// Semi UI AI button
<Button className="ai-gradient">
  AI Assistant
</Button>
```

### Loading States

```jsx
// Breathing loader
<div className="ai-breathing-loader">
  <span className="dot"></span>
  <span className="dot"></span>
  <span className="dot"></span>
</div>

// Pulse loader
<div className="ai-pulse-loader"></div>

// Thinking indicator
<div className="ai-thinking">
  Thinking...
</div>
```

### Streaming Effects

```jsx
// Streaming cursor
<span className="ai-streaming-cursor"></span>

// Streaming text with trail
<span className="ai-streaming-text">
  Generating response...
</span>
```

### Markdown Content

```jsx
// Enhanced markdown container
<div className="ai-markdown-content">
  <ReactMarkdown>{markdownContent}</ReactMarkdown>
</div>

// Compact mode
<div className="ai-markdown-content ai-markdown-compact">
  <ReactMarkdown>{markdownContent}</ReactMarkdown>
</div>

// Large text mode
<div className="ai-markdown-content ai-markdown-large">
  <ReactMarkdown>{markdownContent}</ReactMarkdown>
</div>
```

## ğŸŒ™ Dark Mode Implementation

### Automatic Detection

The theme automatically detects dark mode via:
```javascript
// Check dark mode
const isDarkMode = document.body.getAttribute('theme-mode') === 'dark';

// Toggle dark mode
document.body.setAttribute('theme-mode', isDarkMode ? 'light' : 'dark');
```

### Manual Toggle

```jsx
import { useState, useEffect } from 'react';

function ThemeToggle() {
  const [isDark, setIsDark] = useState(false);

  useEffect(() => {
    const savedTheme = localStorage.getItem('theme') || 'light';
    document.body.setAttribute('theme-mode', savedTheme);
    setIsDark(savedTheme === 'dark');
  }, []);

  const toggleTheme = () => {
    const newTheme = isDark ? 'light' : 'dark';
    document.body.setAttribute('theme-mode', newTheme);
    localStorage.setItem('theme', newTheme);
    setIsDark(!isDark);
  };

  return (
    <Button onClick={toggleTheme}>
      {isDark ? 'ğŸŒ™' : 'â˜€ï¸'} Toggle Theme
    </Button>
  );
}
```

## ğŸ¨ Customization

### Adding New Colors

Add to `src/styles/theme.css`:

```cssn:root {
  --semi-color-custom: #your-color;
}

body[theme-mode='dark'] {
  --semi-color-custom: #your-dark-color;
}
```

Then add to `tailwind.config.js`:

```javascript
colors: {
  // ... existing colors
  'semi-color-custom': 'var(--semi-color-custom)',
}
```

### Custom Animations

Add to `src/styles/ai-effects.css`:

```css
@keyframes your-animation {
  from { /* ... */ }
  to { /* ... */ }
}

.your-class {
  animation: your-animation 2s infinite;
}
```

## ğŸ§ª Testing

### Visual Testing Checklist

- [ ] Primary buttons use Neural Blue
- [ ] AI components show gradient effects
- [ ] Dark mode switches correctly
- [ ] Animations work smoothly
- [ ] Markdown renders properly
- [ ] Code blocks have syntax highlighting
- [ ] Chat bubbles are distinguishable
- [ ] Loading states are visible

### Accessibility Testing

- [ ] Color contrast ratios meet WCAG 2.1 AA standards
- [ ] Text is readable in both light and dark modes
- [ ] Animations respect `prefers-reduced-motion`
- [ ] Focus states are clearly visible
- [ ] Screen reader compatibility maintained

### Performance Testing

- [ ] No layout shifts during theme switching
- [ ] Animations run at 60fps
- [ ] CSS variables don't cause performance issues
- [ ] Dark mode doesn't impact loading times

## ğŸš¨ Common Issues & Solutions

### Issue: Colors not updating
**Solution**: Ensure CSS files are imported in correct order:
```javascript
import '@douyinfe/semi-ui/dist/css/semi.css';
import './styles/theme.css';  // Must come after Semi UI
```

### Issue: Dark mode not working
**Solution**: Check that dark mode CSS is properly scoped:
```css
body[theme-mode='dark'] {
  /* Your dark mode styles */
}
```

### Issue: Animations not smooth
**Solution**: Use hardware-accelerated properties:
```css
.your-animation {
  transform: translateZ(0); /* Enable hardware acceleration */
  will-change: transform;   /* Optimize for transforms */
}
```

### Issue: Custom colors not in Tailwind
**Solution**: Add to `tailwind.config.js`:
```javascript
colors: {
  'your-color': 'var(--your-color)',
}
```

## ğŸ“Š Migration Progress

Use this checklist to track your migration:

### Phase 1: Infrastructure âœ…
- [x] Import theme files
- [x] Configure Tailwind with new colors
- [x] Set up dark mode detection

### Phase 2: Component Styling âœ…
- [x] Button component overrides
- [x] Card component overrides
- [x] Input component overrides
- [x] Typography enhancements

### Phase 3: AI Features âœ…
- [x] Chat bubble styles
- [x] Loading animations
- [x] Streaming effects
- [x] Markdown enhancements

### Phase 4: Cleanup & Testing ğŸ”„
- [ ] Replace hardcoded colors
- [ ] Test dark mode thoroughly
- [ ] Accessibility audit
- [ ] Performance testing
- [ ] Documentation update

## ğŸ“š Additional Resources

### Color References
- [Semi Design Tokens](https://semi.design/dsm/)
- [WCAG Color Contrast](https://webaim.org/resources/contrastchecker/)
- [CSS Custom Properties](https://developer.mozilla.org/en-US/docs/Web/CSS/Using_CSS_custom_properties)

### Animation Libraries
- [Animate.css](https://animate.style/)
- [Framer Motion](https://www.framer.com/motion/)
- [Lottie](https://lottiefiles.com/)

### Design Tools
- [Figma](https://www.figma.com/)
- [Adobe XD](https://www.adobe.com/products/xd.html)
- [Sketch](https://www.sketch.com/)

## ğŸ¤ Support

If you encounter issues during migration:

1. Check this guide first
2. Review the [color migration report](é¢œè‰²è¿ç§»æŠ¥å‘Š.md)
3. Test with the [migration examples](è¿ç§»ç¤ºä¾‹-SettingsLog.jsx)
4. File an issue with detailed reproduction steps

---

**Happy coding with your new AI-First Design System! ğŸ¨âœ¨**