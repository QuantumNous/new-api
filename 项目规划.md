# New API 前端设计系统优化项目规划

## 1. 项目概述 (Project Overview)

### 1.1 项目目标
构建一套基于 Semi Design 并针对 AI 场景深度优化的前端设计系统。通过统一的视觉规范和交互模式，提升品牌识别度、用户体验一致性及开发效率，实现从“功能实现”到“品质体验”的跨越。

### 1.2 预期成果
*   **统一的视觉语言**：基于 "Neural Blue" 和 "Synapse Purple" 的全新 AI 品牌色系。
*   **规范的设计资产**：完整的 CSS 变量主题包 (`theme.css`) 和 Tailwind 配置。
*   **增强的交互体验**：适配 AI 生成场景的 Loading 和 Streaming 动效。
*   **高效的开发流程**：Token 化开发模式，零侵入式主题更新。

### 1.3 项目范围
*   **包含**：
    *   Semi Design 基础变量的覆盖与扩展。
    *   Tailwind CSS 配置的同步更新。
    *   核心组件（按钮、卡片、输入框）的样式微调。
    *   AI 专属组件（如 ChatBubble, CodeBlock）的样式规范制定。
*   **不包含**：
    *   `node_modules` 中 Semi Design 源码的直接修改。
    *   后端逻辑或 API 接口的变更。

### 1.4 关键成功指标 (KPIs)
*   **Token 覆盖率**：核心页面（Home, Dashboard, Chat）硬编码颜色值减少 95% 以上。
*   **一致性**：全站色彩对比度 100% 符合 WCAG AA 标准。
*   **可维护性**：实现仅修改 `theme.css` 即可完成全站 90% 以上的颜色变更。
*   **暗黑模式**：全站无缝切换，无样式崩坏或不可读内容。

---

## 2. 详细工作计划 (Detailed Work Plan)

### 第一阶段：基础设施建设 (Phase 1: Infrastructure)
*目标：建立设计系统的地基，完成变量映射。*

| 任务 ID | 任务内容 | 优先级 | 预期产出 |
| :--- | :--- | :--- | :--- |
| **1.1** | 创建 `src/styles/theme.css`，定义根节点 CSS 变量（色彩、排版、圆角） | **P0** | `theme.css` 文件 |
| **1.2** | 配置 `tailwind.config.js`，集成 Semi Design Tokens | **P0** | 更新后的 `tailwind.config.js` |
| **1.3** | 在 `src/main.jsx` 或 `App.jsx` 中全局引入 `theme.css` | **P0** | 样式生效 |
| **1.4** | 定义 AI 专属语义变量 (`--semi-color-ai-general` 等) | **P1** | 扩展的 CSS 变量集 |

### 第二阶段：核心组件与样式覆盖 (Phase 2: Component Overrides)
*目标：将新设计规范应用到具体 UI 组件。*

| 任务 ID | 任务内容 | 优先级 | 预期产出 |
| :--- | :--- | :--- | :--- |
| **2.1** | 覆盖 Button 组件样式（圆角、阴影、交互态） | **P1** | 统一的按钮风格 |
| **2.2** | 优化 Card 组件样式（背景色、边框、悬浮效果） | **P1** | 统一的卡片风格 |
| **2.3** | 调整 Input/Textarea 组件样式（聚焦态、边框色） | **P1** | 统一的输入框风格 |
| **2.4** | 优化排版系统（字体族、字重、行高），特别是代码块字体 | **P2** | 全局排版优化 |

### 第三阶段：AI 场景增强与动效 (Phase 3: AI Enhancement)
*目标：打造 AI 原生的交互体验。*

| 任务 ID | 任务内容 | 优先级 | 预期产出 |
| :--- | :--- | :--- | :--- |
| **3.1** | 设计并实现 AI 消息气泡样式 (Chat Bubble) | **P1** | AI 对话组件样式 |
| **3.2** | 实现 AI 生成中的呼吸律动效果 (Loading State) | **P2** | CSS 动画代码 |
| **3.3** | 实现流式输出的光标闪烁与尾迹效果 (Streaming Effect) | **P2** | 流式输出动效 |
| **3.4** | 优化 Markdown 渲染样式 (特别是代码块高亮) | **P2** | 优化的 Markdown 样式 |

### 第四阶段：全面迁移与验收 (Phase 4: Migration & QA)
*目标：确保全站落地并符合质量标准。*

| 任务 ID | 任务内容 | 优先级 | 预期产出 |
| :--- | :--- | :--- | :--- |
| **4.1** | 全局扫描并替换硬编码颜色值 (Hex/RGB) | **P0** | 代码清理报告 |
| **4.2** | 暗黑模式全量测试与修复 | **P0** | 修复后的暗黑模式 |
| **4.3** | 色彩对比度与可访问性检查 | **P1** | 体验优化 |
| **4.4** | 编写迁移指南与设计文档 | **P2** | `Design_System_Spec.md` |

---

## 3. 执行规范 (Execution Standards)

### 3.1 代码质量标准
*   **CSS 规范**：
    *   禁止使用 `!important`（除非覆盖第三方库且无其他方案）。
    *   禁止使用硬编码颜色值（如 `#fff`），必须使用 CSS 变量（如 `var(--semi-color-bg-0)`）。
    *   类名命名遵循 BEM 或 Utility-first (Tailwind) 规范。
*   **JS/React 规范**：
    *   组件 props 命名需语义化。
    *   保持组件单一职责。

### 3.2 代码审查 (Code Review)
*   每次提交 Pull Request 前需进行自我审查。
*   重点检查：是否引入了新的硬编码样式？是否破坏了暗黑模式？

### 3.3 测试验证
*   **视觉回归测试**：手动对比关键页面（首页、仪表盘、设置页）变更前后的效果。
*   **多主题测试**：必须在 Light 和 Dark 两种模式下验证所有新样式。

### 3.4 问题上报
*   遇到无法覆盖的 Semi 样式或设计冲突，需记录在 `design-issues.md` 中，并标记为阻塞项 (Blocker)。

---

## 4. 进度跟踪 (Progress Tracking)

### 4.1 每日进度报告模板
```markdown
### [日期] 进度报告
*   **已完成任务**: [任务ID] - [任务描述]
*   **进行中任务**: [任务ID] - [任务描述]
*   **遇到的阻碍**: [描述阻碍] (如有)
*   **下一步计划**: [明日计划]
```

### 4.2 关键节点检查 (Milestones)
*   **M1 (T+3天)**: 基础设施完成，`theme.css` 引入项目，Tailwind 配置生效。
*   **M2 (T+7天)**: 核心组件样式覆盖完成，UI 风格初步统一。
*   **M3 (T+10天)**: AI 动效与组件样式完成，暗黑模式适配完毕。
*   **M4 (T+14天)**: 全量验收通过，文档归档。

### 4.3 风险预警
*   **黄色预警**：关键任务 (P0) 延期超过 1 天。
*   **红色预警**：发现无法解决的样式冲突，或暗黑模式严重崩坏。

### 4.4 应急方案
*   若新样式导致严重 UI 错乱，立即回滚至上一个稳定 commit。
*   若 Semi 组件无法通过 CSS 变量定制，考虑使用 `!important` 临时覆盖并记录技术债，或封装 Wrapper 组件。
